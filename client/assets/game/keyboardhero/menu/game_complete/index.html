<link rel="stylesheet" href="/assets/css/header.css">
<link rel="stylesheet" href="/assets/css/ui_elements.css">
<style>
    .menuContainer {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        height: 100%;
        background-image: url('/assets/game/keyboardhero/textures/game_background.png');
        background-position: center;
        background-size: cover;
    }

    .topBar {
        width: 100%;
        height: 50px;
        background-color: rgba(40, 40, 40, 0.7);
        backdrop-filter: blur(4px);
        box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.5);
        padding: 5px;
    }

    .mainPageContent {
        width: 100%;
        flex: 1;
        display: flex;
        align-items: center;
        flex-direction: column;
        background-color: rgba(0, 0, 0, 0.1);
        padding: 20px;
        text-align: center;
    }

    .settingsShortcut {
        position: absolute;
        top: 5px;
        right: 5px;
    }

    .settingsShortcut img {
        height: 40px;
        filter: invert();
        cursor: pointer;
    }

    .scores {
        width: 100%;
        max-width: 800px;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(20px);
        box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.4);
        padding: 20px;
        border-radius: 20px;
        color: #fff;
    }

    .gameStats {
        color: #fff;
        padding: 30px 0px 0px 0px;
        font-size: 22px;
    }

    .scorePlacement {
        font-size: 30px;
        padding-bottom: 10px;
    }

    .gamescore {}

    .missednotes {}

    .neonButtons {
        width: 100%;
        max-width: 600px;
    }

    @media screen and (max-width: 1100px) {}

    @media screen and (max-width: 800px) {
        .mainPageContent {
            flex-direction: column;
        }


    }
</style>
<div class="menuContainer">
    <div class="topBar">
        <div class="settingsShortcut"><img onclick="MenuManager.GoTo(MENU_SETTINGS);"
                src="/assets/game/keyboardhero/textures/gear.png" alt=""></div>
    </div>
    <div class="mainPageContent">
        <div class="scores">
            <table id="scoreboard">
                <thead>
                    <tr>
                        <th>Player</th>
                        <th>Score</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Scores will be dynamically inserted here -->
                </tbody>
            </table>
        </div>
        <div class="gameStats">
            <div class="scorePlacement">You placed <a id="scoreRank">NA</a> in the ranking for this song</div>
            <div class="gamescore">You got a total of <a id="score"></a> points</div>
            <div class="missednotes">You missed <a id="missednotes"></a> out of <a id="totalnotes"></a> notes</div>
            <div class="maxCombo">You achieved a max combo of X<a id="maxCombo"></a></div>
            
        </div>
        <div class="neonButtons">
            <div class="shadow"><button onclick="MenuManager.GoTo(MENU_MAIN);">Go Home</button></div>
        </div>
    </div>
</div>
</div>
<script>
    function GatherDataForGameCompletedMenu() {
        document.getElementById('score').innerHTML = boards[0].Score();
        document.getElementById('missednotes').innerHTML = boards[0].MissedNotes();
        document.getElementById('totalnotes').innerHTML = boards[0].TotalNotes();
        document.getElementById('maxCombo').innerHTML = boards[0].MaxReachedCombo();

        
        var scoreData = {
            score         : boards[0].Score(), 
            missedNotes   : boards[0].MissedNotes(), 
            totalNotes    : boards[0].TotalNotes(), 
            maxCombo      : boards[0].MaxReachedCombo()
        };
        
        
            $.ajax({
                    type: "POST",
                    url: "/setuserstatistics",
                    data: scoreData,
                    sentType: "json",
                    //success: function(res) {  
                    //},
                    error: function () {
                        // Mainly for debugging
                        console.log("An error occured while saving data and was not saved.");
                    }
                });
        
    }
</script>

